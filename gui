-- Função para destruir o ScreenGui e o ImageButton
local function destroyButton()
    local ScreenGui = game.CoreGui:FindFirstChild("MyScreenGui")
    if ScreenGui then
        ScreenGui:Destroy()
        _G.MyImageButtonActive = false  -- Marca que o botão não está mais ativo
    end
end

-- Verifica se o código já está em execução usando _G
if not _G.MyImageButtonActive then
    -- Cria o ScreenGui
    local ScreenGui = Instance.new("ScreenGui")
    ScreenGui.Name = "MyScreenGui"
    ScreenGui.ZIndexBehavior = Enum.ZIndexBehavior.Sibling
    ScreenGui.Parent = game.CoreGui
    
    -- Cria o ImageButton dentro do ScreenGui
    local ImageButton = Instance.new("ImageButton")
    ImageButton.Name = "MyImageButton"
    ImageButton.BackgroundColor3 = Color3.fromRGB(0, 0, 0)
    ImageButton.BorderSizePixel = 0
    ImageButton.Position = UDim2.new(0.120833337, 0, 0.0952890813, 0)
    ImageButton.Size = UDim2.new(0, 50, 0, 50)
    ImageButton.Draggable = true
    ImageButton.Image = "http://www.roblox.com/asset/?id=16024431693"
    ImageButton.Parent = ScreenGui
    
    -- Conecta o evento MouseButton1Down
    ImageButton.MouseButton1Down:Connect(function()
        game:GetService("VirtualInputManager"):SendKeyEvent(true, Enum.KeyCode.LeftControl, false, game)
    end)
    
    -- Define _G para indicar que o código está em execução
    _G.MyImageButtonActive = true
    
    -- Função para verificar se o Banana Hub foi destruído
    local function checkIfBananaHubDestroyed()
        if _G.BananaHubLoaded and not _G.BananaLib then
            -- Banana Hub foi destruído, então destrói o botão também
            destroyButton()
        end
    end
    
    -- Verificar periodicamente se o Banana Hub foi destruído
    spawn(function()
        while true do
            wait(1)  -- Verifica a cada segundo (ajuste conforme necessário)
            checkIfBananaHubDestroyed()
        end
    end)
    
else
    warn("O código já está em execução.")
end
